<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/yamm.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/bootstrap-editable.css" rel="stylesheet">
    
    <link href="css/style.css" rel="stylesheet">

    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/moment.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-editable.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body class="admin-desk">

	<header class="bs-docs-nav navbar navbar-static-top navbar-default yamm dashboard-nav" data-spy="affix" data-offset-top="60">
		<div class="container">
			<div class="navbar-header">
				<button class="collapsed navbar-toggle" type="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
				<a href="#" class="navbar-brand logo-text">EDIT INVOICE</a> 
			</div>
			<nav class="collapse navbar-collapse" id="bs-navbar">
				<div class="nav navbar-nav navbar-right">
					<a href="#" class="btn btn-default btn-white navbar-btn">SAVE</a>
					<a href="#" class="btn btn-default navbar-btn">SEND</a>
				</div>
			</nav>
		</div>
	</header>

	<div class="floating-sidebar">
		<div class="fs-top"></div>
		<div class="fs-nav-wrapper">
			<ul class="fs-nav">
				<li>
					<a href="#" class="active"><i class="db-icon db-icon-dashboard"></i> <span>DASHBOARD</span></a>
				</li>
				<li>
					<a href="#"><i class="db-icon db-icon-events"></i> <span>EVENTS</span></a>
				</li>
				<li>
					<a href="#"><i class="db-icon db-icon-invoices"></i> <span>INVOICES</span></a>
				</li>
				<li>
					<a href="#"><i class="db-icon db-icon-digital"></i> <span>DIGITAL</span></a>
				</li>
			</ul>

			<ul class="fs-nav">
				<li>
					<a href="#"><i class="db-icon db-icon-setting"></i> <span>SETTINGS</span></a>
				</li>
				<li>
					<a href="#"><i class="db-icon db-icon-logout"></i> <span>LOGOUT</span></a>
				</li>
			</ul>
		</div>
	</div>
	<div class="oneblock-notif">
		<div class="container">
			<div class="row">
				<div class="col-xs-12"><span>DRAFT</span> You first created this draft on December 1st</div>
			</div>
		</div>
	</div>
	<div class="section-admin-main">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					
					<div class="invoice-paper">
						<div class="invoice-header">
							<div class="row">
								<div class="col-xs-12 col-sm-6">
									<div><img src="img/logo-124-transparent.png" height="12px"></div>
									<h2>NAME OF TRAINER</h2>
								</div>
								<div class="col-xs-12 col-sm-6">
									<div class="invoice-trainer-address">
										<div>Trainer name</div>
										<div>Phone number</div>
										<br>
										<div>First line fo address</div>
										<div>Second line of address</div>
										<div>Zip code / Post code</div>
										<div>Country</div>
									</div>
								</div>
							</div>
						</div>
						<div class="invoice-body">
							<div class="row">
								<div class="col-xs-12 col-sm-4">
									<div class="invoice-billed-block">
										<div class="invoice-inner-block-title">Billed To</div>
										<div class="bill-select-wrapper">
											<div class="bill-select-fields">
												<div><span id="clientFirstName">First Name</span> <span id="clientLastName">Last Name</span></div>
												<div><span id="clientEmail">Email Address</span></div>
												<div><span id="clientFirstLineAddress">First Line Address</span></div>
												<div><span id="clientCity">City</span> <span id="clientCountry">Country</span></div>
												<div><span id="clientZip">Zip</span></div>
											</div>
											<button id="btnAddClient" class="btn-dashed"><img src="img/add_icon.png"> Add client</button>
										</div>
									</div>
								</div>
								<div class="col-xs-12 col-sm-2">
									<div class="invoice-date-block" style="margin-bottom: 27px;">
										<div class="invoice-inner-block-title">Date of Issue</div>
										<div class="invoice-date-block-detail">
											<span id="dateIssue1" data-type="combodate" data-pk="1" data-value="2017/07/17" data-title="Date of Issue"></span>
											<i class="fa fa-calendar" aria-hidden="true"></i>
										</div>
									</div>
									<div class="invoice-date-block">
										<div class="invoice-inner-block-title">Due Date</div>
										<div class="invoice-date-block-detail">
											<span id="dueDate" data-type="combodate" data-pk="1" data-value="2017/07/17" data-title="Due Date"></span>
											<i class="fa fa-calendar" aria-hidden="true"></i>
										</div>
									</div>
								</div>
								<div class="col-xs-12 col-sm-2">
									<div class="invoice-no-block">
										<div class="invoice-inner-block-title">Invoice No</div>
										<div id="invoiceNo" class="invoice-no">TV00000</div>
									</div>
								</div>
								<div class="col-xs-12 col-sm-4">
									<div class="invoice-amount">
										<div class="invoice-inner-block-title">Amount Due (USD)</div>
										<div>
											<h3 id="amountduetop">$00.00</h3>
										</div>
									</div>
								</div>
							</div>

							<div class="invoice-items-wrapper">
								<table id="tblInvoiceItem" class="table invoice-items">
									<thead>
										<th>Description</th>
										<th width="120px" class="text-right">Rates</th>
										<th width="120px" class="text-right">Quantity</th>
										<th width="120px" class="text-right">Line of Total</th>
									</thead>
									<tbody>
										<!-- <tr>
											<td>
												<div class="item-title">Item Name</div>
												<div class="item-description">Item description</div>
											</td>
											<td class="add-taxes-wrapper">
												<div class="item-rate">0</div>
												<div class="add-taxes"></div>
											</td>
											<td class="item-quantity-wrapper">
												<div class="item-quantity">0</div>
											</td>
											<td>
												<div class="item-linetotal">$0</div>
												<a href="#" class="item-delete"><img src="img/trash.png"></a>
											</td>
										</tr> -->
									</tbody>
								</table>
								<button id="btnAddItem" class="btn-dashed"><img src="img/add_icon.png"> Add a line</button>
							</div>
							<div class="invoice-total">
								<div class="row">
									<div class="col-xs-12 col-sm-offset-6 col-sm-6">
										<table class="table">
											<tbody>
												<tr>
													<td>Subtotal</td>
													<td width="94px" id="subtotal">0.00</td>
												</tr>
												<tr>
													<td>Tax</td>
													<td width="94px" id="tax">0.00</td>
												</tr>
												<tr>
													<td>Total</td>
													<td width="94px" id="total">0.00</td>
												</tr>
												<tr class="amount-due">
													<td class="amount-due-label">Amount Due (USD)</td>
													<td id="amountdue">0.00</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="invoice-footer">
							<div class="invoice-footer-title">Terms & Conditions</div>
							<div>fjdskladjfhs jdkas fjdskladjfhs jdkas djospafjdskladjfhs jdkas djospafjdskladjfhs jdkas djospafjdskladjfhs jdkas djospafjdskladjfhs jdkas djospafjdskladjfhs jdkas djospa</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<!-- page script -->
    <script type="text/javascript" src="js/script.js"></script>
    <script type="text/javascript">
    	$(document).ready(function(){
    		$.fn.editable.defaults.mode = 'inline';
    		$.fn.editable.defaults.showbuttons = false;
    		
    		$(".invoice-trainer-address div").editable({
    			type:"text"
    		});

    		$("#btnAddClient").click(function(){
    			$(this).hide();
    		})

    		$("#clientFirstName, #clientLastName, #clientEmail, #clientFirstLineAddress, #clientZip, #invoiceNo").editable({
    			type:"text"
    		});

    		$("#clientCity").editable({
    			type:"select",
    			value: 1,    
		        source: [
		              {value: 1, text: 'City 1'},
		              {value: 2, text: 'City 2'},
		              {value: 3, text: 'City 3'}
		           ]
    		});
    		$("#clientCountry").editable({
    			type:"select",
    			value: 1,    
		        source: [
		              {value: 1, text: 'Country 1'},
		              {value: 2, text: 'Country 2'},
		              {value: 3, text: 'Country 3'}
		           ]
    		});

    		$("#dateIssue1").editable({
    			mode:'popup',
    			combodate: {
	                minYear: 2000,
	                maxYear: 2050,
	                minuteStep: 1
		        },
		        showbuttons: true
    		});

    		$("#dueDate").editable({
    			mode:'popup',
    			combodate: {
	                minYear: 2000,
	                maxYear: 2050,
	                minuteStep: 1
		        },
		        showbuttons: true
    		});

    		$("#btnAddItem").click(function(){
    			$("#tblInvoiceItem tbody").append('<tr><td>'+
												'<div class="item-title"></div>'+
												'<div class="item-description"></div>'+
											'</td>'+
											'<td class="add-taxes-wrapper">'+
												'<div class="item-rate">0</div>'+
												'<div class="add-taxes"></div>'+
											'</td>'+
											'<td class="item-quantity-wrapper">'+
												'<div class="item-quantity">1</div>'+
											'</td>'+
											'<td>'+
												'<div class="item-linetotal">$0</div>'+
												'<a href="#" class="item-delete"><img src="img/trash.png"></a>'+
											'</td>'+
										'</tr>');

    			//inital editable content
    			$(".item-title").editable({
    				emptytext: "Item Name",
	    			type:"text"
	    		});

	    		$(".item-description").editable({
	    			emptytext: "Item description",
	    			type:"text"
	    		});

	    		$(".item-quantity").editable({
	    			type:"text"
	    		});
	    		$(".item-quantity").on("hidden", function(e, params){
	    			calculateInvoice();
	    		})

	    		$(".item-rate").editable({
	    			type:"text",
	    			display: function(value) {
				      $(this).text('$' + value);
				    }
	    		});
	    		$(".item-rate").on("hidden", function(e, params){
	    			calculateInvoice();
	    		})

	    		$(".add-taxes").editable({
	    			emptytext: "Add Taxes",
	    			type:"text",
	    			display: function(value) {
	    				if(value != ""){
	    					$(this).text(value + "%");
	    				}
				    } 
	    		});
	    		$(".add-taxes").on("hidden", function(e, params){
	    			calculateInvoice();
	    		});
    		});

    		$("#tblInvoiceItem").on("click", ".item-delete", function(e){
    			e.preventDefault();
    			var tr = $(this).closest("tr");
    			tr.remove();

    			calculateInvoice();
    		})
    	});

    	function calculateInvoice(){
    		var totalTaxes = 0;
    		var subTotal = 0;
    		
    		$("#tblInvoiceItem>tbody>tr").each(function(index){
    			var currentLine = $(this);
    			var itemeRate = parseInt(currentLine.find(".item-rate").text().replace("$", ""));
    			var itemQuantity = currentLine.find(".item-quantity").text();
    			var lineTotal = itemQuantity * itemeRate;

    			var lineTotalControl = currentLine.find(".item-linetotal");
    			lineTotalControl.text("$" + lineTotal);

    			var taxAmount = 0;
    			if(currentLine.find(".add-taxes").text() != "Add Taxes"){
    				taxes = parseInt(currentLine.find(".add-taxes").text().replace("%", ""));
    				taxAmount = taxes/100 * lineTotal;
    				totalTaxes += taxAmount;
    			}

    			subTotal += lineTotal;
    			$("#subtotal").text("$" + subTotal);

    			$("#tax").html("$" + totalTaxes);

    			var total = subTotal + totalTaxes;
    			$("#total").html("$" + total);

    			$("#amountdue, #amountduetop").html("$" + total);			
    		})
    	}
    </script>

</body>
</html>